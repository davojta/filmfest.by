{% load i18n markup %}
<h3>{% trans 'Latest news' %} </h3>
{% for news_entry in news %}
        <article>
            <h4><a href="{% url news_entry news_entry.id %}">{{ news_entry.title }}</a></h4>
            <div>{{ news_entry.short_text|markdown }} </div>
        </article>
{% endfor %}
<a class="show_news">{% trans 'Show more >>>>>' %} </a><a class="hide_news hide" >{% trans 'Hide <<<<<' %}</a>
<script>
    var MAX_VISIBLE_NEWS_ARTICLES = 3;

    $(function() {
        var $news = $('#news'),
            $links = $news.children('.show_news, .hide_news'),
            $hiddenNews = $news.children(':gt(' + MAX_VISIBLE_NEWS_ARTICLES + '):not(a)');

        $hiddenNews.hide();

        $links.on('click', function() {
            $links.toggleClass('hide');
            if (!$links.eq(1).hasClass('hide')) {
                $hiddenNews.show();
            } else {
                $hiddenNews.hide();
            }
        })

    })
</script>
